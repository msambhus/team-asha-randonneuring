â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    TEAM ASHA RANDONNEURING - DATABASE SCHEMA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         AUTHENTICATION & USER LAYER                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     app_user        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ ğŸ”‘ id               â”‚
    â”‚ ğŸ“§ email            â”‚
    â”‚ ğŸ” google_id        â”‚
    â”‚    profile_completedâ”‚
    â”‚ ğŸ‘¤ rider_id (FK)    â”‚â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    created_at       â”‚       â”‚
    â”‚    last_login       â”‚       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            RIDER INFORMATION                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      rider          â”‚â—„â”€â”€â”€â”€â”€â”€â”‚    rider_profile        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ ğŸ”‘ id               â”‚       â”‚ ğŸ”‘ğŸ‘¤ rider_id (PK,FK)   â”‚
    â”‚ ğŸ« rusa_id          â”‚       â”‚     photo_filename      â”‚
    â”‚    first_name       â”‚       â”‚     bio                 â”‚
    â”‚    last_name        â”‚       â”‚     pbp_2023_registered â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚     pbp_2023_status     â”‚
           â”‚                      â”‚     show_private_rides  â”‚
           â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”œâ”€â”€â”€â–ºâ”‚  strava_connection       â”‚
           â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
           â”‚    â”‚ ğŸ”‘ğŸ‘¤ rider_id (PK,FK)    â”‚
           â”‚    â”‚ ğŸƒ strava_athlete_id     â”‚
           â”‚    â”‚     access_token         â”‚
           â”‚    â”‚     refresh_token        â”‚
           â”‚    â”‚     expires_at           â”‚
           â”‚    â”‚     scope                â”‚
           â”‚    â”‚     connected_at         â”‚
           â”‚    â”‚     last_sync_at         â”‚
           â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”œâ”€â”€â”€â–ºâ”‚  strava_activity         â”‚
           â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
           â”‚    â”‚ ğŸ”‘ id                    â”‚
           â”‚    â”‚ ğŸ‘¤ rider_id (FK)         â”‚
           â”‚    â”‚ ğŸƒ strava_activity_id    â”‚
           â”‚    â”‚     name                 â”‚
           â”‚    â”‚     activity_type        â”‚
           â”‚    â”‚     distance             â”‚
           â”‚    â”‚     moving_time          â”‚
           â”‚    â”‚     elapsed_time         â”‚
           â”‚    â”‚     total_elevation_gain â”‚
           â”‚    â”‚     start_date           â”‚
           â”‚    â”‚     average_speed        â”‚
           â”‚    â”‚     strava_url           â”‚
           â”‚    â”‚     fetched_at           â”‚
           â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚    â”‚                                                 â”‚
           â–¼    â–¼                                                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
    â”‚    rider_ride        â”‚                                     â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                     â”‚
    â”‚ ğŸ”‘ id                â”‚                                     â”‚
    â”‚ ğŸ‘¤ rider_id (FK)     â”‚                                     â”‚
    â”‚ ğŸš´ ride_id (FK)      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
    â”‚    status            â”‚         â”‚                          â”‚
    â”‚    finish_time       â”‚         â”‚                          â”‚
    â”‚ â° signed_up_at      â”‚         â”‚                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                          â”‚
                                     â”‚                          â”‚
                                     â–¼                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        RIDE ORGANIZATION & PLANNING                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     season      â”‚         â”‚        club            â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ ğŸ”‘ id           â”‚         â”‚ ğŸ”‘ id                  â”‚
    â”‚    name         â”‚         â”‚    code                â”‚
    â”‚    start_date   â”‚         â”‚    name                â”‚
    â”‚    end_date     â”‚         â”‚    region              â”‚
    â”‚    is_current   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
           â”‚                                â”‚
           â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚    â”‚
           â–¼    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚           ride                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚      ride_plan          â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ ğŸ”‘ id                            â”‚         â”‚ ğŸ”‘ id                   â”‚
    â”‚ ğŸ“… season_id (FK)                â”‚         â”‚    name                 â”‚
    â”‚ ğŸ  club_id (FK) [REQUIRED]       â”‚         â”‚    slug                 â”‚
    â”‚ ğŸ“‹ ride_plan_id (FK)             â”‚         â”‚    total_distance_miles â”‚
    â”‚    name                          â”‚         â”‚    total_elevation_ft   â”‚
    â”‚    ride_type                     â”‚         â”‚    rwgps_url            â”‚
    â”‚    date (DATE TYPE)              â”‚         â”‚    rwgps_url_team       â”‚
    â”‚    distance_km                   â”‚         â”‚    distance_km          â”‚
    â”‚    elevation_ft                  â”‚         â”‚    cutoff_hours         â”‚
    â”‚    distance_miles                â”‚         â”‚    start_time           â”‚
    â”‚    ft_per_mile                   â”‚         â”‚    avg_moving_speed     â”‚
    â”‚    rwgps_url                     â”‚         â”‚    avg_elapsed_speed    â”‚
    â”‚    rusa_event_id                 â”‚         â”‚    total_moving_time_minâ”‚
    â”‚    event_status                  â”‚         â”‚    total_elapsed_time_minâ”‚
    â”‚    start_location [NEW]          â”‚         â”‚    total_break_time_min â”‚
    â”‚    start_time [NEW]              â”‚         â”‚    overall_ft_per_mile  â”‚
    â”‚    time_limit_hours [NEW]        â”‚         â”‚    overall_ft_per_mile  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    rwgps_route_id       â”‚
                                  â–²              â”‚    created_at           â”‚
                                  |              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  |
                                  â”‚                       â”‚
                                  â”‚                       â”‚
                                  â”‚                       â–¼
                                  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚              â”‚   ride_plan_stop        â”‚
                                  â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                  â”‚              â”‚ ğŸ”‘ id                   â”‚
                                  â”‚              â”‚ ğŸ“‹ ride_plan_id (FK)    â”‚
                                  â”‚              â”‚    stop_order           â”‚
                                  â”‚              â”‚    location             â”‚
                                  â”‚              â”‚    stop_type            â”‚
                                  â”‚              â”‚    distance_miles       â”‚
                                  â”‚              â”‚    elevation_gain       â”‚
                                  â”‚              â”‚    segment_time_min     â”‚
                                  â”‚              â”‚ â˜• stop_duration_min    â”‚
                                  â”‚              â”‚ â˜• stop_name            â”‚
                                  â”‚              â”‚    notes                â”‚
                                  â”‚              â”‚    seg_dist             â”‚
                                  â”‚              â”‚    ft_per_mi            â”‚
                                  â”‚              â”‚    avg_speed            â”‚
                                  â”‚              â”‚    cum_time_min         â”‚
                                  â”‚              â”‚    bookend_time_min     â”‚
                                  â”‚              â”‚    time_bank_min        â”‚
                                 â”‚               â”‚    difficulty_score     â”‚
                                 â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚                       â”‚
                                 â”‚                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CUSTOM RIDE PLANS (User Personalization)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   custom_ride_plan      â”‚              â”‚  custom_ride_plan_stop       â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ ğŸ”‘ id                   â”‚              â”‚ ğŸ”‘ id                        â”‚
    â”‚ ğŸ‘¤ rider_id (FK)        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ ğŸ“ custom_plan_id (FK)       â”‚
    â”‚ ğŸ“‹ base_plan_id (FK)    â”‚              â”‚ ğŸ“Œ base_stop_id (FK)         â”‚
    â”‚    name                 â”‚              â”‚    stop_order                â”‚
    â”‚    description          â”‚              â”‚    location                  â”‚
    â”‚    is_public            â”‚              â”‚    stop_type                 â”‚
    â”‚    avg_moving_speed     â”‚              â”‚    distance_miles            â”‚
    â”‚    created_at           â”‚              â”‚    elevation_gain            â”‚
    â”‚    updated_at           â”‚              â”‚    segment_time_min          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ â˜• stop_duration_min         â”‚
         â”‚                                   â”‚ â˜• stop_name                 â”‚
         â”‚                                   â”‚    notes                     â”‚
         â”‚                                   â”‚    is_custom_stop            â”‚
         â”‚                                   â”‚    is_hidden                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             
         UNIQUE(rider_id, base_plan_id)     â†‘ base_stop_id references ride_plan_stop

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

LEGEND:
  ğŸ”‘  Primary Key
  ğŸ‘¤  Foreign Key to rider
  ğŸ“§  Email (unique)
  ğŸ”  Authentication identifier
  ğŸ“…  Foreign Key to season
  ğŸ   Foreign Key to club
  ğŸ“‹  Foreign Key to ride_plan
  ğŸš´  Foreign Key to ride
  ğŸ“  Foreign Key to custom_ride_plan
  ğŸ“Œ  Foreign Key to ride_plan_stop (base stop)
  ğŸƒ  Strava identifier (athlete or activity)
  ğŸ«  RUSA ID (unique)
  â°  Timestamp
  â˜•  Break/Rest stop data (duration and name)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RELATIONSHIP SUMMARY:

1. Authentication Flow:
   app_user â†’ rider â†’ rider_profile

2. Ride Organization:
   season â†’ ride â† club
   ride_plan â†’ ride
   ride_plan â†’ ride_plan_stop (1:many)

3. Ride Participation:
   rider â†’ rider_ride â†’ ride (consolidated lifecycle: signup â†’ result)

4. Strava Integration:
   rider â†’ strava_connection (1:1, OAuth tokens)
   rider â†’ strava_activity (1:many, cached activities)
   
   Key behaviors:
   â€¢ One Strava connection per rider
   â€¢ Activities cached for 1 year rolling window
   â€¢ Privacy control via rider_profile.show_private_rides
   â€¢ Used for fitness scoring and calendar view

5. Custom Ride Plans:
   rider â†’ custom_ride_plan â†’ base_plan_id (references ride_plan)
   custom_ride_plan â†’ custom_ride_plan_stop (1:many)
   custom_ride_plan_stop â†’ base_stop_id (references ride_plan_stop, optional)
   
   Key behaviors:
   â€¢ One custom plan per rider per base plan (UNIQUE constraint)
   â€¢ Stops can inherit from base (base_stop_id) or be custom (is_custom_stop=TRUE)
   â€¢ Base stops can be hidden (is_hidden=TRUE) without deletion
   â€¢ Custom plans can be shared (is_public=TRUE) for other riders to view/copy
   â€¢ Pace can be customized (avg_moving_speed) to recalculate segment times
   
   Break/Rest Stop Inheritance (stop_duration_min & stop_name):
   â€¢ Delta model: custom_ride_plan_stop stores only overrides
   â€¢ stop_duration_min = NULL or 0: Inherit from base plan
   â€¢ stop_duration_min = -1: Explicitly removed (don't inherit even if base has it)
   â€¢ stop_duration_min > 0: Use custom value
   â€¢ stop_name follows stop_duration_min (coupled together)
   â€¢ When duration inherited, name also inherited; when removed, both cleared

6. Event Management:
   â€¢ All events (Team Asha + external RUSA) in unified ride table
   â€¢ Team Asha rides: club_id = 'TA' (Bay Area)
   â€¢ External events: club_id = DBC/SFR/SCR/SRR (by region)
   â€¢ Use club_id to differentiate event types

7. Key Features:
   â€¢ Google OAuth authentication
   â€¢ RUSA member integration
   â€¢ Detailed ride planning with waypoints
   â€¢ Custom ride plans for personalization with break/rest stop overrides
   â€¢ Ride signup and completion tracking
   â€¢ Multi-season management
   â€¢ Club-based organization
   â€¢ Unified event calendar (Team Asha + external)
   â€¢ Strava integration for activity tracking

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RECENT SCHEMA CHANGES:
â€¢ 2026-02-25: Added stop_duration_min â˜• and stop_name â˜• to ride_plan_stop and 
              custom_ride_plan_stop for break/rest stop management
              - Implements delta inheritance model with sentinel values
              - stop_duration_min: NULL/0 = inherit, -1 = removed, >0 = custom
              - Coupled with stop_name for consistent break display

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
