{% extends "base.html" %}
{% block title %}Upcoming Brevets - {{ season_label }} - Team Asha Randonneuring{% endblock %}

{% block content %}
<div class="hero" style="padding:40px 20px;">
<h1>Upcoming Brevets</h1>
<p>{{ season_label }} &mdash; RUSA events in the Bay Area</p>
</div>

<div class="container section">
<h2>Ride Calendar</h2>

<div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;margin-bottom:15px;">
<div style="display:flex;gap:8px;flex-wrap:wrap;font-size:0.75rem;">
    {% for region, color in region_colors.items() %}
    <span style="display:inline-flex;align-items:center;gap:4px;"><span style="display:inline-block;width:12px;height:12px;border-radius:3px;background:{{ color }};"></span>{{ region }}</span>
    {% endfor %}
</div>
</div>
<p style="font-size:0.8rem;color:var(--text-light);margin-bottom:15px;">Events sourced from <a href="https://rusa.org/cgi-bin/eventsearch_GF.pl" target="_blank" style="color:var(--accent);">RUSA</a> for Davis, San Francisco &amp; Santa Cruz regions.</p>

<div class="card">
{% for event in rusa_events %}
<div style="display:flex;align-items:flex-start;gap:12px;padding:12px 0;{% if not loop.last %}border-bottom:1px solid var(--border);{% endif %}">
<div style="min-width:48px;text-align:center;">
    <div style="font-size:0.75rem;color:var(--text-light);text-transform:uppercase;">{{ event.date[5:7] }}/{{ event.date[8:10] }}</div>
    <div style="font-size:1.4rem;font-weight:800;color:var(--primary);line-height:1;">{{ event.date[8:10] }}</div>
</div>
<div style="flex:1;min-width:0;">
    <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap;">
        <span style="display:inline-block;padding:2px 8px;border-radius:4px;font-size:0.75rem;font-weight:600;color:white;background:{{ region_colors.get(event.region, '#999') }};">{{ event.region }}</span>
        <span style="font-weight:700;color:var(--accent);">{{ event.distance_km }} km</span>
        <span style="font-size:0.8rem;color:var(--text-light);">{{ event.ride_type }}</span>
    </div>
    <div style="font-size:0.85rem;margin-top:4px;color:var(--text);">{{ event.route_name }}
    {% if event.climbing %}<span style="margin-left:8px;color:var(--text-light);font-size:0.75rem;">{{ event.climbing }}</span>{% endif %}
    </div>
</div>
</div>
{% endfor %}
{% if not rusa_events %}
<p style="padding:20px;color:var(--text-light);text-align:center;">No upcoming RUSA events found.</p>
{% endif %}
</div>

<p style="margin-top:15px;color:var(--text-light);font-size:0.85rem;">View <a href="{{ url_for('riders.season_riders', season_name=season.name) }}" style="color:var(--accent);font-weight:600;">completed brevets</a> for this season.</p>
</div>
{% endblock %}
